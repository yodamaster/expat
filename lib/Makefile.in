################################################################
# Process this file with top-level configure script to produce Makefile
#
# Copyright 2000 Clark Cooper
#
#  This file is part of EXPAT.
#
#  EXPAT is free software; you can redistribute it and/or modify it
#  under the terms of the License (based on the MIT/X license) contained
#  in the file COPYING that comes with this distribution.
#
# EXPAT IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
# IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
# CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
# TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
# SOFTWARE OR THE USE OR OTHER DEALINGS IN EXPAT.
#


SHELL = @SHELL@

srcdir = @srcdir@
top_srcdir = @top_srcdir@
VPATH = @srcdir@
prefix = @prefix@
exec_prefix = @exec_prefix@

libdir = @libdir@

top_builddir = ..

CC = @CC@
LIBTOOL = @LIBTOOL@

LIBRARY = libexpat.la
LTOBJECTS = xmlparse.lo xmltok.lo xmlrole.lo

INCLUDES = -I$(srcdir) -I. -I..
DEFS = @DEFS@

CPPFLAGS = @CPPFLAGS@
LDFLAGS = @LDFLAGS@
LIBS = @LIBS@
CFLAGS = @CFLAGS@

LIBREVISION = @LIBREVISION@
LIBCURRENT  = @LIBCURRENT@
LIBAGE      = @LIBAGE@

COMPILE = $(CC) $(DEFS) $(INCLUDES) $(CPPFLAGS) $(CFLAGS)
LTCOMPILE = $(LIBTOOL) --mode=compile $(CC) $(DEFS) $(INCLUDES) $(CPPFLAGS) $(CFLAGS)
LINK = $(LIBTOOL) --mode=link  $(CC) -version-info $(LIBCURRENT):$(LIBREVISION):$(LIBAGE) $(CFLAGS) $(LDFLAGS) -o $@


all: $(LIBRARY)

.SUFFIXES: .c .lo .o
.PHONY: all

.c.o:
	$(COMPILE) -c $<

.c.lo:
	$(LTCOMPILE) -c $<

$(LIBRARY): $(LTOBJECTS)
	$(LINK) -rpath $(libdir) $(LDFLAGS) $(LTOBJECTS)

xmlparse.o \
xmlparse.lo: xmlparse.c expat.h xmlrole.h xmltok.h $(top_builddir)/config.h

xmlrole.o \
xmlrole.lo: xmlrole.c ascii.h xmlrole.h $(top_builddir)/config.h

xmltok.o \
xmltok.lo: xmltok.c xmltok_impl.c xmltok_ns.c \
          ascii.h asciitab.h iasciitab.h latin1tab.h nametab.h utf8tab.h \
          xmltok.h xmltok_impl.h $(top_builddir)/config.h
